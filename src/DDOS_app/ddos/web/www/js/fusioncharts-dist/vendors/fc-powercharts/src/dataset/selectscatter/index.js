import ScatterDataset from'../../../../fc-charts/src/dataset/scatter';import{preDefStr,extend2,pluck,pluckNumber,ZEROSTRING,bindSelectionEvent,getMouseCoordinate,convertColor}from'../../../../fc-core/src/lib';import{getDepsByType,addDep}from'../../../../fc-core/src/dependency-manager';import selectScatterAnimation from'./index.animation';var COLOR_FFFFFF='FFFFFF',altHGridColorStr=preDefStr.altHGridColorStr,altHGridAlphaStr=preDefStr.altHGridAlphaStr;addDep({name:'selectScatterAnimation',type:'animationRule',extension:selectScatterAnimation});class SelectScatterDataset extends ScatterDataset{getType(){return'dataset'}getName(){return'selectScatter'}configure(a){super.configure(a);var b=this,c=b.getFromEnv('chart'),d=c.config,e=c.getFromEnv('dataSource').chart,f=b.getFromEnv('color-manager'),g=pluck(e.selectbordercolor,f.getColor('canvasBorderColor')),h=pluckNumber(e.selectborderalpha,f.getColor('canvasBorderAlpha'));d.selectBorderColor={FCcolor:{color:g,alpha:h}},d.selectFillColor=convertColor(pluck(e.selectfillcolor,f.getColor(altHGridColorStr)),pluckNumber(e.selectfillalpha,f.getColor(altHGridAlphaStr))),d.selectionCancelButtonBorderColor=convertColor(pluck(e.selectioncancelbuttonbordercolor,g),pluckNumber(e.selectioncancelbuttonborderalpha,h)),d.selectionCancelButtonFillColor=convertColor(pluck(e.selectioncancelbuttonfillcolor,COLOR_FFFFFF),pluckNumber(e.selectioncancelbuttonfillalpha,100)),d.connativeZoom=!1,d.zoomType='xy',e.submitdataasxml!==ZEROSTRING||e.formdataformat||(e.formdataformat=getDepsByType('transcoder').csv&&'csv'),d.formDataFormat=pluck(e.formdataformat),d.formTarget=pluck(e.formtarget,'_self'),d.formMethod=pluck(e.formmethod,'POST'),d.submitFormAsAjax=pluckNumber(e.submitformusingajax,1)}draw(){super.draw();var a=this,b=a.getFromEnv('chart'),c=b.getFromEnv('chart-container'),d=a.getFromEnv('xAxis'),e=a.getFromEnv('yAxis');bindSelectionEvent(b,{selectionStart:function(a){var f=getMouseCoordinate(c,a.originalEvent,b),g=extend2({selectionLeft:a.selectionLeft,selectionTop:a.selectionTop,selectionWidth:a.selectionWidth,selectionHeight:a.selectionHeight,startXValue:d.getValue(a.selectionLeft,1),startYValue:e.getValue(a.selectionTop,1)},f);a.chart.fireChartInstanceEvent('selectionStart',g)},selectionEnd:function(a){var f=getMouseCoordinate(c,a.originalEvent,b),g=extend2({selectionLeft:a.selectionLeft,selectionTop:a.selectionTop,selectionWidth:a.selectionWidth,selectionHeight:a.selectionHeight,startXValue:d.getValue(a.selectionLeft,1),startYValue:e.getValue(a.selectionTop,1),endXValue:d.getValue(a.selectionLeft+a.selectionWidth,1),endYValue:e.getValue(a.selectionTop+a.selectionHeight,1)},f);a.chart.fireChartInstanceEvent('selectionEnd',g),a.chart.createSelectionBox(a)}})}}export default SelectScatterDataset;