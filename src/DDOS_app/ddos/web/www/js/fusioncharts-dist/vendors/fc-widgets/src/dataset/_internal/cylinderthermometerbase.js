import{pluckNumber,pluck,COMMASTRING,BLANK,getValidValue,parseTooltext,parseUnsafeString,HUNDREDSTRING,preDefStr,convertColor,getLightColor}from'../../../../fc-core/src/lib';import{ComponentInterface}from'../../../../fc-core/src/component-interface';var UNDEF,BLANKSTRING=BLANK,AXISPOSITION_TOP=1,AXISPOSITION_BOTTOM=3,gaugeFillColorStr=preDefStr.gaugeFillColorStr,gaugeBorderColorStr=preDefStr.gaugeBorderColorStr,dummyStr='dummy',FILLMIXDARK10='{dark-10}';class CylinderThermometerBase extends ComponentInterface{getType(){return'dataset'}getName(){return'cylinderThermometerBase'}setValue(a,b){if(a){var c,d=this,e=d.config,f=d.getFromEnv('chart'),g=f.getFromEnv('dataSource').chart,h=d.getFromEnv('number-formatter'),i=a.value,j=a.tooltext||g.plottooltext;e.value=i=h.getCleanValue(i),null===i?(e.displayValue=BLANKSTRING,e.toolText=BLANKSTRING,e.formattedValue=null):(c=e.formattedValue=h.dataLabels(e.value),e.displayValue=e.showValue?a.label||getValidValue(c,BLANK):BLANKSTRING,e.toolText=e.showTooltip?j===UNDEF?parseUnsafeString(parseTooltext(pluck(a.tooltext,null===c?BLANKSTRING:c))):parseUnsafeString(parseTooltext(pluck(a.tooltext,j),[1,2],{formattedValue:c,value:i},a,g)):BLANKSTRING),b&&d.draw()}}configure(a){if(!a)return!1;this.setValue(a&&a.data&&a.data[0]);var b,c,d,e,f=this,g=f.getFromEnv('chart'),h=g.getFromEnv('dataSource'),i=h.chart,j=f.config||(f.config={}),k=f.getFromEnv('color-manager'),l=g.config,m=pluckNumber(i.showhovereffect);j.showValue=pluckNumber(i.showvalue,i.showvalues,1),j.showTooltip=pluckNumber(i.showtooltip,1),j.valuePadding=pluckNumber(i.valuepadding,2),j.tooltipSepChar=pluck(i.tooltipsepchar,COMMASTRING),j.pointerOnOpp=pluckNumber(i.pointerontop,0),j.axisPosition=pluckNumber(i.ticksbelowgauge,i.ticksbelowgraph,this.ticksbelowgauge,1)?AXISPOSITION_BOTTOM:AXISPOSITION_TOP,j.valueAbovePointer=pluckNumber(i.valueabovepointer,1),j.labelStyle=l.dataLabelStyle,e=j.gaugeFillColor=pluck(i.gaugefillcolor,i.thmfillcolor,i.cylfillcolor,k.getColor(gaugeFillColorStr)),d=j.gaugeFillAlpha=pluckNumber(i.gaugefillalpha,i.cylfillalpha,i.thmfillalpha,HUNDREDSTRING),j.showGaugeBorder=pluckNumber(i.showgaugeborder,1),b=j.showGaugeBorder?pluckNumber(i.gaugeborderalpha,40):0,j.gaugeBorderColor=convertColor(pluck(i.gaugebordercolor,k.getColor(gaugeBorderColorStr)),b),j.gaugeBorderThickness=pluckNumber(i.gaugeborderthickness,1),j.gaugeContainerColor=pluck(i.thmglasscolor,i.cylglasscolor,g.glasscolor,getLightColor(e,30)),0!==m&&(m||i.plotfillhovercolor||i.plotfillhoveralpha||0===i.plotfillhoveralpha)&&(j.showHoverEffect=!0,c=pluck(i.plotfillhovercolor,i.cylfillhovercolor,i.thmfillhovercolor,FILLMIXDARK10),j.plotFillHoverAlpha=pluckNumber(i.plotfillhoveralpha,i.cylfillhoveralpha,i.thmfillhoveralpha,d),j.plotFillHoverColor=/\{/.test(c)?k.parseColorMix(e,c)[0]:c),f.setValue(h),g._parseSpecialConfig&&g._parseSpecialConfig()}_getLabelSpace(){var a,b=this,c=b.config,d=b.getFromEnv('chart'),e=b.getFromEnv('smartLabel');return e.useEllipsesOnOverflow(d.config.useEllipsesWhenOverflow),e.setStyle(c.labelStyle),a=e.getOriSize(c.displayValue===BLANK?dummyStr:c.displayValue),a.height?a.height+c.valuePadding:0}getDataLimits(){var a,b,c=this,d=c.config;return b=a=d.value,d.maxValue=b,d.minValue=a,{forceMin:!0,forceMax:!0,max:b,min:a}}updateData(){var a=this,b=arguments[0],c=arguments[2],d=a.config,e=d.maxValue,f=d.prevMin,g=d.value,h=a.getFromEnv('chart'),i=a.groupManager||a,j=a.getFromEnv('scale');a.setValue(b.data[0]),d.maxValue=g,d.minValue=g,(d.maxValue!==e||d.minValue!==f)&&(a.config.maxminFlag=!0),c&&(h._setAxisLimits(),j.draw(),i.draw())}setJSONIndex(a){this.config.index=a}getJSONIndex(){return this.config.index||0}}export default CylinderThermometerBase;