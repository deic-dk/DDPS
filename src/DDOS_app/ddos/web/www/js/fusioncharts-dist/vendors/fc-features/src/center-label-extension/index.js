import CenterLabelExtension from'./center-label-extension';import{componentFactory}from'../../../fc-core/src/lib';import{priorityList}from'../../../fc-core/src/schedular';let UNDEF,isValidChart=a=>{var b=a.getName().toLowerCase();return('doughnut2d'===b||'multilevelpie'===b)&&'dataset'===a.getType()},count=0;function centerLabel(a,b){var c=this.apiInstance,d=c.getChildren('dataset')[0],e=d.getChildren(),f=e.centerLabel&&e.centerLabel[0],g=c.config,h=function(){var d,e,g=c.getDatasets()[0],h=g.config,i=h.piePlotOptions,j=i.innerSize;if(d=f.config,'object'!=typeof b)b=d;else{for(e in d)b[e]===UNDEF&&(b[e]=d[e]);d=Object.assign(d,b)}b.label=a,d.label=a,g.centerLabelConfig=d,j&&f&&f.draw(a||'')};f===UNDEF&&(componentFactory(d,CenterLabelExtension,'centerLabel',1,[g]),f=e.centerLabel&&e.centerLabel[0]),c.addJob(`eiMethods-center-lebel${count++}`,h,priorityList.postRender)}export default{extension:function(a){a.addEventListener('instantiated',function(a){let b=a.sender;isValidChart(b)&&b.registerFactory('centerLabel',function(){let a=b.getFromEnv('chartConfig'),c=b.getFromEnv('chartInstance'),d=!!(a.centerlabel||a.defaultcenterlabel);c.centerLabel=centerLabel,componentFactory(b,CenterLabelExtension,'centerLabel',d?1:0,[a])})})},name:'CenterLabelExtension',type:'extension',requiresFusionCharts:!0};