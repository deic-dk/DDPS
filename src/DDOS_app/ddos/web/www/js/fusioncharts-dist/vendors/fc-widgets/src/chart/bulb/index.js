import GaugeWidget from'../_internal/gaugewidget';import BulbDataset from'../../dataset/bulb';import{pluckNumber,componentFactory}from'../../../../fc-core/src/lib';import ColorGradient from'../../../../fc-core/src/color-utils/color-bucket';import datasetFactory from'../../factories/vled-dataset';var UNDEF;class Bulb extends GaugeWidget{static getName(){return'Bulb'}constructor(){super(),this.isRealTime=!0,this._drawCanvas=function(){},this.registerFactory('dataset',datasetFactory,['vCanvas'])}getName(){return'Bulb'}_clearChart(){}configureAttributes(a){super.configureAttributes(a);let b=this,c=b.getFromEnv('dataSource'),d=c.colorrange;componentFactory(b,ColorGradient,'colorRange',1,[{colorRange:d,numberFormatter:b.getFromEnv('number-formatter')}]),b.addToEnv('colorRange',b.getChildren('colorRange')[0])}__setDefaultConfig(){super.__setDefaultConfig();let a=this.config;a.showRTvalue=!1,a.canvasPadding=!1,a.defaultSeriesType='bulb',a.defaultPlotShadow=1,a.drawAnnotations=!0,a.charttopmargin=10,a.chartrightmargin=10,a.chartbottommargin=10,a.chartleftmargin=10,a.realtimeEnabled=!0,a.isRealTime=!0,a.friendlyName='Bulb Gauge',a.defaultDatasetType='bulb',a.placevaluesinside=0,a.hasgaugeoriginx=UNDEF,a.gaugeoriginx=UNDEF,a.hasgaugeoriginy=UNDEF,a.gaugeoriginy=UNDEF,a.hasgaugeradius=UNDEF,a.gaugeradius=UNDEF,a.valuepadding=2,a.showgaugeborder=0,a.showhovereffect=UNDEF,a.autoscale=1,a.skipCanvasDrawing=!0}_spaceManager(){var a,b,c,d=this,e=d.config,f=d.getChildren('dataset')[0],g=f.config,h=d.config.is3D,i=d.getFromEnv('dataSource').chart,j=pluckNumber(i.showborder,h?0:1),k=e.minChartWidth,l=e.minChartHeight,m=e.borderWidth=j?pluckNumber(i.borderthickness,1):0;g.scaleFactor=e.autoscale?Bulb._getScaleFactor(g.origW,g.origH,e.width,e.height):1,e.canvasWidth-2*m<k&&(c=(e.canvasWidth-k)/2),e.canvasHeight-2*m<l&&(b=(e.canvasHeight-l)/2),d._allocateSpace({top:b||m,bottom:b||m,left:c||m,right:c||m}),d._allocateSpace(d._manageActionBarSpace&&d._manageActionBarSpace(.225*e.availableHeight)||{}),a=.7*e.canvasHeight,d._manageChartMenuBar(a),f._manageSpace&&d._allocateSpace(f._manageSpace(a))}allocatePosition(){let a,b=this,c=b.config,d=b.getDatasets()[0],e=d.config,f=c.canvasHeight,g=c.canvasWidth,h=c.canvasTop,i=c.canvasLeft,j=c.gaugeoriginx,k=c.gaugeoriginy,l=c.gaugeradius,m=c.hasgaugeoriginx,n=c.hasgaugeoriginy,o=c.hasgaugeradius;j=m===UNDEF?i+g/2:j*e.scaleFactor,k=n===UNDEF?h+f/2:k*e.scaleFactor,a=o===UNDEF?Math.min(g/2,f/2):l*e.scaleFactor,c.gaugeStartX=j-a,c.gaugeEndX=j+a,c.gaugeStartY=k-a,c.gaugeEndY=k+a,c.gaugeCenterX=j,c.gaugeCenterY=k,c.gaugeRadius=a}_getData(){var a,b,c=this,d=c.getChildren('dataset');if(d&&(b=d[0].components.data,b&&b[0]))return a=b[0].config,pluckNumber(a.setValue,a.itemValue)}_postSpaceManagement(){this.allocateDimensionOfChartMenuBar()}getDSdef(){return BulbDataset}static _getScaleFactor(a,b,c,d){var e;return b=pluckNumber(b,d),a=pluckNumber(a,c),e=b&&a?a/c==b/d?c/a:Math.min(c/a,d/b):1,e}}export default Bulb;