import{datasetFactory,componentFactory}from'../../../fc-core/src/lib';import ColumnMultiSeriesGroup from'../dataset/groups/column-multiseries';export default function(a){let b,c,d,e,f,g,h=a.getFromEnv('dataSource'),j=h.dataset,k=j&&j.length,l=0,m=a.getChildren('canvas')[0],n=m.getChildren('vCanvas')[0],o=[];if(!j)return void a.setChartMessage();for(componentFactory(n,ColumnMultiSeriesGroup,'multiSeriesGroup_column'),g=n.getChildren('multiSeriesGroup_column')[0],b=0;b<k;b++)o.push(j[b].dataset);for(componentFactory(g,a.getDSGroupdef(),'stackedGroup_column',k,o),f=g.getChildren('stackedGroup_column'),b=0;b<f.length;b++)if(!0!==f[b].getState('removed')){if(d=j[b].dataset,!d)return void a.setChartMessage();c=d&&d.length,e=Array(c).fill(b*l).map((a,b)=>a+b),datasetFactory(f[b],a.getDSdef(),'dataset_column',c,d,e),l=c}a.config._lastDatasetIndex=e[e.length-1]}